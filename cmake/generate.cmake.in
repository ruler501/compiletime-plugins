cmake_minimum_required(VERSION 3.14)

set(INCLUDE_PLUGINS)
foreach(INCLUDE_DIR_TO_SEARCH $INCLUDE_DIRS_TO_SEARCH)
    file(GLOB INCLUDED_COMPILETIME_PLUGINS LIST_DIRECTORIES false RELATIVE ${CMAKE_BINARY_DIR}/include
            ${CMAKE_BINARY_DIR}/include/compiletimeplugins/plugins/*.h)
    foreach(PLUGIN ${INCLUDED_COMPILETIME_PLUGINS})
        string(APPEND INCLUDE_PLUGINS "#include \"${PLUGIN}\"\n")
    endforeach()
endforeach()
configure_file(@COMPILETIMEPLUGINS_ROOT@/compiletimeplugins.h.in @COMPILETIMEPLUGINS_GENERATED_DIR@/include/compiletimeplugins/compiletimeplugins.h @ONLY)
